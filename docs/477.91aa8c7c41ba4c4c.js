"use strict";(self.webpackChunkcontent_service_ui=self.webpackChunkcontent_service_ui||[]).push([[477],{6477:(_,c,s)=>{s.r(c),s.d(c,{ConfigLoginModule:()=>O});var l=s(6814),p=s(9310),r=s(95),u=s(553),t=s(4946),g=s(5118),m=s(7351),d=s(707);function v(n,h){1&n&&(t.TgZ(0,"div",7),t._uU(1," Please select an environment. "),t.qZA())}let b=(()=>{class n{constructor(i,e,o,a){this.fb=i,this.ref=e,this.contentService=o,this.router=a,this.display=!0,this.devUrl=u.N.devPort,this.prodUrl=u.N.prodPort}ngOnInit(){this.environmentForm=this.fb.group({environment:["",r.kI.required]})}submitEnvironment(){if(this.environmentForm.valid){const i=this.environmentForm.value.environment;this.contentService.getApiHost(i),this.ref.close(i),this.router.navigate(["/content/story/list"])}else this.markFormGroupTouched(this.environmentForm)}markFormGroupTouched(i){Object.values(i.controls).forEach(e=>{e.markAsTouched(),e instanceof r.cw&&this.markFormGroupTouched(e)})}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(g.E7),t.Y36(m._),t.Y36(p.F0))};static#o=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-global-api-host"]],decls:18,vars:4,consts:[[3,"formGroup"],[1,"field"],["type","radio","formControlName","environment","value","dev"],[2,"margin-left","10px"],["type","radio","formControlName","environment","value","prod"],["class","text-danger",4,"ngIf"],["pButton","","type","button","pButton","","label","Submit",2,"height","45px",3,"click"],[1,"text-danger"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"form",0)(2,"div",1)(3,"label"),t._UZ(4,"input",2),t._uU(5," Development "),t._UZ(6,"br"),t.TgZ(7,"a",3),t._uU(8),t.qZA()()(),t.TgZ(9,"div",1)(10,"label"),t._UZ(11,"input",4),t._uU(12," Production "),t._UZ(13,"br"),t.TgZ(14,"a",3),t._uU(15),t.qZA()()(),t.YNc(16,v,2,0,"div",5),t.qZA(),t.TgZ(17,"button",6),t.NdJ("click",function(){return o.submitEnvironment()}),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.environmentForm),t.xp6(7),t.Oqu(o.devUrl),t.xp6(7),t.Oqu(o.prodUrl),t.xp6(1),t.Q6J("ngIf",o.environmentForm.get("environment").invalid&&o.environmentForm.get("environment").touched))},dependencies:[l.O5,r._Y,r.Fj,r._,r.JJ,r.JL,r.sg,r.u,d.Hq],styles:[".dialog-content[_ngcontent-%COMP%]   .ui-dialog-title[_ngcontent-%COMP%]{font-size:28px}.field[_ngcontent-%COMP%]{margin-bottom:10px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-size:18px}input[type=radio][_ngcontent-%COMP%]{margin-right:5px}.text-danger[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:5px}button[_ngcontent-%COMP%]{margin-top:12%;width:100%;background-color:#007bff;color:#fff;padding:12px;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return n})();var C=s(6778),f=s(3714);function x(n,h){1&n&&(t.TgZ(0,"small",13),t._uU(1,"Username is required."),t.qZA())}function Z(n,h){1&n&&(t.TgZ(0,"small",13),t._uU(1,"Password is required."),t.qZA())}let P=(()=>{class n{constructor(i,e,o,a,T){this.fb=i,this.authService=e,this.router=o,this.contentService=a,this.dialogService=T,this.showPassword=!1,this.loginForm=this.fb.group({username:["",[r.kI.required]],password:["",[r.kI.required]]})}ngOnInit(){}login(i){if(this.loginForm.valid){const{username:e,password:o}=i.value;this.contentService.getVirtualID(e,o).subscribe(a=>{a?.result?.virtualID&&this.checkVirtualID(Number(a?.result?.virtualID))})}}checkVirtualID(i){this.authService.checkVirtualID(i)?this.dialogService.open(b,{header:"Select Environment",closable:!0,contentStyle:{"font-size":"28px"}}):this.router.navigate(["/forbidden"])}togglePasswordVisibility(){this.showPassword=!this.showPassword}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(C.e),t.Y36(p.F0),t.Y36(m._),t.Y36(g.xA))};static#o=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-login"]],decls:21,vars:9,consts:[[1,"login-container"],[3,"formGroup","ngSubmit"],[2,"text-align","center"],[1,"p-field"],["for","username"],[1,"required"],["type","text","id","username","formControlName","username","pInputText","","required",""],["class","error-message",4,"ngIf"],["for","password"],[1,"password-input-container"],["id","password","formControlName","password","pPassword","","required","",3,"type"],[1,"pi",2,"padding-bottom","6px",3,"ngClass","click"],["type","submit","pButton","","label","Login",2,"height","45px"],[1,"error-message"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.login(o.loginForm)}),t.TgZ(2,"h1",2),t._uU(3,"Login"),t.qZA(),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Username"),t.TgZ(7,"span",5),t._uU(8,"*"),t.qZA()(),t._UZ(9,"input",6),t.YNc(10,x,2,0,"small",7),t.qZA(),t.TgZ(11,"div",3)(12,"label",8),t._uU(13,"Password"),t.TgZ(14,"span",5),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"div",9),t._UZ(17,"input",10),t.TgZ(18,"i",11),t.NdJ("click",function(){return o.togglePasswordVisibility()}),t.qZA()(),t.YNc(19,Z,2,0,"small",7),t.qZA(),t._UZ(20,"button",12),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.loginForm),t.xp6(3),t.ekj("p-error",o.loginForm.get("username").touched&&o.loginForm.get("username").hasError("required")),t.xp6(6),t.Q6J("ngIf",o.loginForm.get("username").touched&&o.loginForm.get("username").hasError("required")),t.xp6(1),t.ekj("p-error",o.loginForm.get("password").touched&&o.loginForm.get("password").hasError("required")),t.xp6(6),t.s9C("type",o.showPassword?"text":"password"),t.xp6(1),t.Q6J("ngClass",o.showPassword?"pi-eye-slash":"pi-eye"),t.xp6(1),t.Q6J("ngIf",o.loginForm.get("password").touched&&o.loginForm.get("password").hasError("required")))},dependencies:[l.mk,l.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,f.o,d.Hq],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}h1[_ngcontent-%COMP%]{font-size:24px;color:#333;margin-bottom:20px}form[_ngcontent-%COMP%]{width:450px;text-align:left;padding:20px;border:1px solid #ddd;border-radius:5px;box-shadow:0 0 10px #0000001a;background-color:#fff}.p-field[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;margin-bottom:6px;color:#333}input[_ngcontent-%COMP%]{width:100%;height:35px;padding:8px;margin-bottom:10px;box-sizing:border-box;border:1px solid #ddd;border-radius:3px}button[_ngcontent-%COMP%]{width:100%;background-color:#007bff;color:#fff;padding:12px;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.required[_ngcontent-%COMP%]{color:red;margin-left:3px}.error-message[_ngcontent-%COMP%]{left:0;bottom:-18px;font-size:12px;color:red;text-align:left;margin-top:5px}.p-field[_ngcontent-%COMP%]{position:relative}.password-input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.pi[_ngcontent-%COMP%]{position:absolute;right:10px;cursor:pointer;font-size:18px;color:#999}.pi[_ngcontent-%COMP%]:hover{color:#333}"]})}return n})(),y=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#o=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild([{path:"",component:P}]),p.Bz]})}return n})();var F=s(1312);let O=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#o=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({providers:[g.xA],imports:[l.ez,y,r.u5,r.UX,f.j,d.hJ,F.S]})}return n})()}}]);