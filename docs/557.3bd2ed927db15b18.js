"use strict";(self.webpackChunkcontent_service_ui=self.webpackChunkcontent_service_ui||[]).push([[557],{8557:(at,b,a)=>{a.r(b),a.d(b,{StoryModule:()=>nt});var u=a(6814),r=a(95),g=a(9310),p=a(5219),h=a(8783),t=a(4946),c=a(5118),_=a(7351),y=a(707),v=a(3714),f=a(4480),x=a(3965),C=a(9445);function F(n,d){1&n&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu("Author"))}const T=function(n){return{"ng-invalid ng-dirty":n}};function q(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"div",2)(3,"p-messages",3),t.NdJ("valueChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.messages=i)}),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6),t.qZA(),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",4)(9,"label",7),t._uU(10),t.qZA(),t._UZ(11,"input",8),t.YNc(12,F,2,1,"small",0),t.qZA(),t.TgZ(13,"div",4)(14,"label",9),t._uU(15),t.qZA(),t._UZ(16,"p-dropdown",10),t.qZA(),t.TgZ(17,"div",4)(18,"label",9),t._uU(19),t.qZA(),t._UZ(20,"p-dropdown",11),t.qZA(),t.TgZ(21,"div",4)(22,"label",12),t._uU(23),t.qZA(),t._UZ(24,"textarea",13),t.qZA()(),t.TgZ(25,"div",14)(26,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addOrEditStory("Add"))}),t.qZA(),t._uU(27,"\xa0 "),t.TgZ(28,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancel())}),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.addStoryForm),t.xp6(2),t.Q6J("value",e.messages)("enableService",!1)("closable",!0),t.xp6(3),t.hij("","Name"," *"),t.xp6(1),t.s9C("placeholder","Enter Name"),t.xp6(3),t.hij("","Author"," *"),t.xp6(1),t.s9C("placeholder","Enter Author"),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.addStoryForm.controls.author.errors),t.xp6(3),t.hij("","Language"," *"),t.xp6(1),t.s9C("placeholder","Select Language"),t.Q6J("showClear",!0)("options",e.languageList)("ngClass",t.VKq(22,T,e.addStoryForm.controls.language.errors)),t.xp6(3),t.hij("","Category","*"),t.xp6(1),t.s9C("placeholder","Select Category"),t.Q6J("showClear",!0)("options",e.contentTypeList),t.xp6(3),t.hij("","Description"," "),t.xp6(1),t.s9C("placeholder","Enter description"),t.xp6(2),t.s9C("label","Submit"),t.xp6(2),t.s9C("label","Cancel")}}function U(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"div",2)(3,"p-messages",3),t.NdJ("valueChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.messages=i)}),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6),t.qZA(),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",4)(9,"label",7),t._uU(10),t.qZA(),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"div",4)(13,"label",9),t._uU(14),t.qZA(),t._UZ(15,"p-dropdown",10),t.qZA()(),t.TgZ(16,"div",14)(17,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addOrEditStory("Edit"))}),t.qZA(),t._uU(18,"\xa0 "),t.TgZ(19,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancel())}),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.editStoryForm),t.xp6(2),t.Q6J("value",e.messages)("enableService",!1)("closable",!0),t.xp6(3),t.hij("","Name"," *"),t.xp6(1),t.s9C("placeholder","Enter Name"),t.xp6(3),t.hij("","Author"," *"),t.xp6(1),t.s9C("placeholder","Enter Author"),t.xp6(3),t.hij("","Language"," *"),t.xp6(1),t.s9C("placeholder","Select Language"),t.Q6J("showClear",!0)("options",e.languageList)("ngClass",t.VKq(15,T,e.editStoryForm.controls.language.errors)),t.xp6(2),t.s9C("label","Submit"),t.xp6(2),t.s9C("label","Cancel")}}let S=(()=>{class n{constructor(e,o,i,s,l){this.formBuilder=e,this.ref=o,this.dialogConfig=i,this.contentService=s,this.router=l,this.difficultyLvlList=h.X.difficultyLvlList,this.languageList=h.X.languages,this.contentTypeList=h.X.contentTypeList,this.data=this.dialogConfig.data,this.mode=this.data.mode,this.storyList=this.data.wordAndSentenceData}ngOnInit(){this.initializeAddForm(),"Edit"===this.mode&&this.initialzeEditForm(),this.addStoryForm.patchValue({category:this.contentTypeList[0].value})}initializeAddForm(){this.addStoryForm=this.formBuilder.group({name:["",r.kI.required],author:["",r.kI.required],language:["",r.kI.required],category:["",r.kI.required],description:"",image:"",difficulty:""})}initialzeEditForm(){this.editStoryForm=this.formBuilder.group({name:[this.storyList?.name,r.kI.required],author:[this.storyList?.author,r.kI.required],language:[this.storyList?.language,r.kI.required],image:this.storyList?.image,difficulty:this.storyList?.difficulty,description:this.storyList?.description,category:this.storyList?.category})}cancel(){this.ref.close()}addOrEditStory(e){if("Add"===e){if(this.addStoryForm.invalid)return void(this.messages=[{severity:"error",summary:"Add Required Data"}]);this.contentService.addMoreStory({name:this.addStoryForm.value.name,author:this.addStoryForm.value.author,language:this.addStoryForm.value.language,category:this.addStoryForm.value.category,description:this.addStoryForm.value.description,status:"live"}).subscribe(i=>{"success"===i.status&&this.ref.close(i.data)},i=>{this.messages=[{severity:"error",summary:"error"}]})}else if("Edit"===e){if(this.editStoryForm.invalid)return void(this.messages=[{severity:"error",summary:"Error"}]);this.contentService.editStory({name:this.editStoryForm.value.name,author:this.editStoryForm.value.author,language:this.editStoryForm.value.language,category:this.editStoryForm.value.category,status:"live"},this.storyList._id).subscribe(i=>{i.updated&&this.ref.close(i.updated)},i=>{this.messages=[{severity:"error",summary:"Please fill all fields"}]})}}navigateToSomeRoute(){this.router.navigate(["/content/story/list"])}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(r.qu),t.Y36(c.E7),t.Y36(c.S),t.Y36(_._),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-or-edit-story"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup"],[1,"card","p-fluid"],[3,"value","enableService","closable","valueChange"],[1,"field"],["for","name"],["type","text","name","name","pInputText","","id","name","autofocus","","formControlName","name",3,"placeholder"],["for","author"],["type","text","name","author","pInputText","","id","author","autofocus","","formControlName","author",3,"placeholder"],["for","multiselect"],["formControlName","language","optionLabel","label","appendTo","body","optionValue","value",3,"showClear","options","placeholder","ngClass"],["formControlName","category","optionLabel","label","appendTo","body","optionValue","value",3,"showClear","options","placeholder"],["for","description"],["type","text","name","description","pInputText","","id","description","formControlName","description","rows","3",3,"placeholder"],[1,"p-col-12","p-md-6","p-lg-4","p-xl-3","p-button-container"],["pButton","","pRipple","","icon","pi pi-check",1,"p-button","p-button-success",3,"label","click"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button","p-button-danger",3,"label","click"]],template:function(o,i){1&o&&(t.YNc(0,q,29,24,"div",0),t.YNc(1,U,20,17,"div",0)),2&o&&(t.Q6J("ngIf","Add"===i.mode),t.xp6(1),t.Q6J("ngIf","Edit"===i.mode))},dependencies:[u.mk,u.O5,r._Y,r.Fj,r.JJ,r.JL,y.Hq,v.o,f.H,x.Lt,r.sg,r.u,C.V],styles:["input.ng-touched.ng-invalid[_ngcontent-%COMP%], textarea.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid red}small[_ngcontent-%COMP%]{color:red}.p-button-container[_ngcontent-%COMP%]{float:right}#disabled-input[_ngcontent-%COMP%]{background-color:#f0f0f0;opacity:.7;pointer-events:none}"]})}return n})();var L=a(8645);let M=(()=>{class n{constructor(){this.mediaRecorder=null,this.chunks=[],this.audioSubject=new L.x}startRecording(){}stopRecording(){}playAudio(e){new Audio(e).play()}playAudioWithProgress(e){const o=new Audio(e);return o.controls=!1,o.addEventListener("timeupdate",()=>{this.audioSubject.next({type:"timeupdate",currentTime:o.currentTime,duration:o.duration})}),o.addEventListener("ended",()=>{this.audioSubject.next({type:"ended"})}),o.play(),this.audioSubject.asObservable()}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function w(n,d){1&n&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu("contentText"))}const A=function(n){return{"ng-invalid ng-dirty":n}};function I(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"div",2)(3,"p-messages",3),t.NdJ("valueChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.messages=i)}),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6),t.qZA(),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",4)(9,"label",7),t._uU(10),t.qZA(),t._UZ(11,"p-dropdown",8),t.qZA(),t.TgZ(12,"div",4)(13,"label",5),t._uU(14),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",4)(17,"label",10),t._uU(18),t.qZA(),t._UZ(19,"textarea",11),t.YNc(20,w,2,1,"small",0),t.qZA()(),t.TgZ(21,"div",12)(22,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addContent())}),t.qZA(),t._uU(23,"\xa0 "),t.TgZ(24,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancel())}),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.ContentForm),t.xp6(2),t.Q6J("value",e.messages)("enableService",!1)("closable",!0),t.xp6(3),t.hij("","Collection Id"," *"),t.xp6(1),t.s9C("placeholder","Enter collectionId"),t.xp6(3),t.Oqu("Content Type"),t.xp6(1),t.s9C("placeholder","Select Content Type"),t.Q6J("showClear",!0)("options",e.contentTypeList)("ngClass",t.VKq(18,A,e.ContentForm.controls.contentType.errors)),t.xp6(3),t.hij("","Index"," *"),t.xp6(1),t.s9C("placeholder","Enter Index"),t.xp6(3),t.hij("","Content Text"," *"),t.xp6(1),t.s9C("placeholder","Enter contentText"),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.ContentForm.controls.contentText.errors),t.xp6(2),t.s9C("label","Submit"),t.xp6(2),t.s9C("label","Cancel")}}function E(n,d){1&n&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu("contentText"))}function J(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"div",2)(3,"p-messages",3),t.NdJ("valueChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.messages=i)}),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6),t.qZA(),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",4)(9,"label",7),t._uU(10),t.qZA(),t._UZ(11,"p-dropdown",8),t.qZA(),t.TgZ(12,"div",4)(13,"label",10),t._uU(14),t.qZA(),t._UZ(15,"textarea",11),t.YNc(16,E,2,1,"small",0),t.qZA()(),t.TgZ(17,"div",12)(18,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.editContent())}),t.qZA(),t._uU(19,"\xa0 "),t.TgZ(20,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancel())}),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.editContentForm),t.xp6(2),t.Q6J("value",e.messages)("enableService",!1)("closable",!0),t.xp6(3),t.hij("","Collection Id"," *"),t.xp6(1),t.s9C("placeholder","Enter collectionId"),t.xp6(3),t.Oqu("Content Type"),t.xp6(1),t.s9C("placeholder","Select Content Type"),t.Q6J("showClear",!0)("options",e.contentTypeList)("ngClass",t.VKq(16,A,e.editContentForm.controls.contentType.errors)),t.xp6(3),t.hij("","Content Text"," *"),t.xp6(1),t.s9C("placeholder","Enter contentText"),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.editContentForm.controls.contentText.errors),t.xp6(2),t.s9C("label","Submit"),t.xp6(2),t.s9C("label","Cancel")}}let O=(()=>{class n{constructor(e,o,i,s,l,rt,st){this.formBuilder=e,this.ref=o,this.dialogConfig=i,this.contentService=s,this.audioService=l,this.messageService=rt,this.router=st,this.contentTypeList=h.X.contentTypeList,this.isRecording=!1,this.isPlaying=!1,this.progressValue=0,this.currentTime="0:00",this.duration="0:00",this.data=this.dialogConfig.data,this.mode=this.data.mode,this.storyDetailData=this.data.wordAndSentenceData}ngOnInit(){"Edit"===this.data.mode&&(this.initializeEditForm(),this.editContentForm.patchValue({contentType:this.storyDetailData.category})),this.initializeAddForm(),this.ContentForm.patchValue({contentType:this.contentTypeList[0].value})}initializeEditForm(){this.editContentForm=this.formBuilder.group({collectionId:[this.storyDetailData?.collectionId,r.kI.required],contentType:[this.storyDetailData?.category,r.kI.required],contentText:[this.storyDetailData?.contentSourceData[0].text||"",r.kI.required],contentAudio:[""]})}initializeAddForm(){this.ContentForm=this.formBuilder.group({collectionId:[this.storyDetailData?.collectionId,r.kI.required],contentType:["",r.kI.required],contentText:["",r.kI.required],contentAudio:[""]})}cancel(){this.ref.close()}navigateToSomeRoute(){this.router.navigate(["/content/story/list"])}editContent(){this.editContentForm.invalid?this.messages=[{severity:"error",summary:"Add Required Data"}]:this.contentService.editMoreWords({publisher:this.storyDetailData.data.publisher,name:this.storyDetailData.data.name,contentType:"Sentence",image:" ",status:1,collectionId:this.editContentForm.value.collectionId,data:[{[this.storyDetailData.language]:{text:this.editContentForm.value.contentText}}]},this.storyDetailData.data._id).subscribe(o=>{o.updated&&this.ref.close(o.updated)},o=>{this.messages=[{severity:"error",summary:"Please fill all fields"}]})}addContent(){this.ContentForm.invalid?this.messages=[{severity:"error",summary:"Add Required Data"}]:this.contentService.addMoreWords({collectionId:this.ContentForm.value.collectionId,name:this.storyDetailData.name,contentType:this.ContentForm.value.contentType,imageUrl:"",status:this.storyDetailData.status,publisher:this.storyDetailData.author,language:this.storyDetailData.language,contentSourceData:[{language:this.storyDetailData.language,audioUrl:"",text:this.ContentForm.value.contentText}],contentIndex:1,tags:[]}).subscribe(o=>{"success"===o.status&&this.ref.close(o.data)},o=>{this.messages=[{severity:"error",summary:""}]})}startRecording(){this.audioService.startRecording()}stopRecording(){this.audioService.stopRecording()}get recordButtonLabel(){return this.isRecording?"Stop Recording":"Record"}playRecorded(){}playUploaded(){}playAudio(e){this.audioSubscription&&this.audioSubscription.unsubscribe(),this.audioSubscription=this.audioService.playAudioWithProgress(e).subscribe(o=>{"timeupdate"===o.type?(this.progressValue=o.currentTime/o.duration*100,this.currentTime=this.formatTime(o.currentTime),this.duration=this.formatTime(o.duration)):"ended"===o.type&&(this.isPlaying=!1,this.progressValue=0,this.currentTime="0:00")},o=>{console.error("Error playing audio:",o)}),this.isPlaying=!0}ngOnDestroy(){this.audioSubscription&&this.audioSubscription.unsubscribe()}formatTime(e){const o=Math.floor(e/60),i=Math.floor(e%60);return`${o}:${i<10?"0":""}${i}`}handleFileInput(e){const o=e.files&&e.files[0];if(o){const i=o;if(i){const s=new FileReader;s.onload=l=>{this.uploadedImage=l.target.result},s.readAsDataURL(i),this.messageService.add({severity:"info",summary:"File Uploaded",detail:`${i.name} is uploaded`})}}}onAudioUpload(e){const o=e.files&&e.files[0];o&&console.log("Uploaded audio file:",o)}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(r.qu),t.Y36(c.E7),t.Y36(c.S),t.Y36(_._),t.Y36(M),t.Y36(p.ez),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-sentence-for-story"]],features:[t._Bn([p.ez])],decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup"],[1,"card","p-fluid"],[3,"value","enableService","closable","valueChange"],[1,"field"],["for","contentType"],["type","text","name","collectionId","pInputText","","id","collectionId","autofocus","","formControlName","collectionId","readonly","",3,"placeholder"],["for","multiselect"],["formControlName","contentType","optionLabel","label","appendTo","body","optionValue","value",3,"showClear","options","placeholder","ngClass"],["type","number","name","index","pInputText","","id","index","autofocus","","formControlName","index","min","0",3,"placeholder"],["for","contentText"],["type","text","name","contentText","pInputText","","id","contentText","autofocus","","formControlName","contentText","rows","2",3,"placeholder"],[1,"p-col-12","p-md-6","p-lg-4","p-xl-3","p-button-container"],["pButton","","pRipple","","icon","pi pi-check",1,"p-button","p-button-success",3,"label","click"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button","p-button-danger",3,"label","click"]],template:function(o,i){1&o&&(t.YNc(0,I,25,20,"div",0),t.YNc(1,J,21,18,"div",0)),2&o&&(t.Q6J("ngIf","Add_Content"===i.mode),t.xp6(1),t.Q6J("ngIf","Edit"===i.mode))},dependencies:[u.mk,u.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,y.Hq,v.o,f.H,x.Lt,r.sg,r.u,C.V],styles:[".button-row[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%], .upload-button[_ngcontent-%COMP%]{color:#fff;border:none;cursor:pointer}.upload-button[_ngcontent-%COMP%]   .ui-button-text[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}button[_ngcontent-%COMP%]:hover, .upload-button[_ngcontent-%COMP%]:hover{background-color:#005ba3}button[_ngcontent-%COMP%]:active, .upload-button[_ngcontent-%COMP%]:active{background-color:#036}.horizontal-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:row}.radio-option[_ngcontent-%COMP%]{margin-right:10px}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:20px}  .p-fileupload-choose{background-color:#64748b}  .p-fileupload-choose span{color:#fff}"]})}return n})();var m=a(6361),Z=a(3904);const D=["dt"];function N(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clear(i.dt1))}),t.qZA(),t.TgZ(2,"div",13)(3,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addMoreStory())}),t.qZA()()()}2&n&&(t.xp6(3),t.s9C("label","Add Stories"))}function k(n,d){1&n&&(t.TgZ(0,"tr")(1,"th",15)(2,"div",16),t._uU(3," Title "),t._UZ(4,"p-columnFilter",17),t.qZA()(),t.TgZ(5,"th",15)(6,"div",16),t._uU(7," Author "),t._UZ(8,"p-columnFilter",18),t.qZA()(),t.TgZ(9,"th",15)(10,"div",16),t._uU(11," Tags "),t._UZ(12,"p-columnFilter",19),t.qZA()(),t.TgZ(13,"th",20)(14,"div",16),t._uU(15," Language "),t._UZ(16,"p-columnFilter",21),t.qZA()(),t.TgZ(17,"th",22)(18,"div",16),t._uU(19," Created At "),t._UZ(20,"p-sortIcon",23)(21,"p-columnFilter",24),t.qZA()(),t.TgZ(22,"th",25)(23,"div",16),t._uU(24," Updated At "),t._UZ(25,"p-sortIcon",23)(26,"p-columnFilter",26),t.qZA()(),t.TgZ(27,"th",15)(28,"div",16),t._uU(29," Collection ID "),t._UZ(30,"p-columnFilter",27),t.qZA()(),t.TgZ(31,"th",28)(32,"div",16),t._uU(33," Actions "),t.qZA()()())}const j=function(n){return{"disabled-row":n}};function P(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"tr",29)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"td",30),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.openWordList(s.collectionId))}),t._uU(16),t.qZA(),t.TgZ(17,"td",31)(18,"button",32),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.addWord(s))}),t.qZA(),t.TgZ(19,"button",33),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.editStory(s))}),t.qZA(),t.TgZ(20,"button",34),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteProduct(s))}),t.qZA()()()}if(2&n){const e=d.$implicit,o=t.oxw();t.Q6J("pEditableRow",o.tutorial)("ngClass",t.VKq(15,j,e.deleted)),t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.author," "),t.xp6(2),t.hij(" ",e.tags," "),t.xp6(2),t.hij(" ",e.language," "),t.xp6(2),t.hij(" ",t.xi3(11,9,e.createdAt,"dd/MM/yyyy")," "),t.xp6(3),t.hij(" ",t.xi3(14,12,e.updatedAt,"dd/MM/yyyy")," "),t.xp6(3),t.hij(" ",e.collectionId," ")}}function Y(n,d){1&n&&(t.TgZ(0,"tr")(1,"td",35),t._uU(2,"No Stories found."),t.qZA()())}function R(n,d){1&n&&(t.TgZ(0,"tr")(1,"td",35),t._uU(2," Loading Stories ... Please wait. "),t.qZA()())}const H=function(){return[10,100,200,300]},Q=function(){return["name","country.name","representative.name","status"]},G=function(){return{width:"450px"}};let K=(()=>{class n{constructor(e,o,i,s,l){this.contentService=e,this.ref=o,this.dialogService=i,this.confirmationService=s,this.router=l,this.storyList=[],this.loading=!1,this.messages=[]}ngOnInit(){this.getStoriesList()}getStoriesList(){this.contentService.getStoriesList().subscribe(e=>{"success"===e.status&&(this.storyList=e.data,this.loading=!1)},e=>{this.messages=[],this.messages=[{severity:"error",detail:e?.error?.params?.errmsg}]})}addMoreStory(){this.ref=this.dialogService.open(S,{header:"Add Stories",data:{mode:"Add"},width:"40%",contentStyle:{overflow:"auto"}}),this.ref.onClose.subscribe(e=>{e&&(this.storyList.push(e),this.messages=[],this.messages=[{severity:"info",summary:"Created",detail:"Story is Created"}],this.dataTable.reset(),this.dataTable.value=this.storyList)})}addWord(e){this.ref=this.dialogService.open(O,{header:"Add Content",data:{mode:"Add_Content",wordAndSentenceData:e},width:"40%",contentStyle:{overflow:"auto"}}),this.ref.onClose.subscribe(o=>{o&&(this.storyList.push(o),this.messages=[],this.messages=[{severity:"info",summary:"Created",detail:"Content is Created"}],this.dataTable.reset(),this.dataTable.value=this.storyList)})}editStory(e){this.ref=this.dialogService.open(S,{header:"Edit Story",data:{mode:"Edit",wordAndSentenceData:e},width:"40%",contentStyle:{overflow:"auto"}}),this.ref.onClose.subscribe(o=>{if(o){const i=this.storyList.findIndex(s=>s._id===o._id);-1!==i&&(this.storyList[i]=o),this.messages=[],this.messages=[{severity:"info",summary:"Updated",detail:"Story is Updated"}],this.dataTable.reset(),this.dataTable.value=this.storyList}})}deleteProduct(e){this.confirmationService.confirm({message:"Are you sure that you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.contentService.deleteCollection(e?._id).subscribe(o=>{e.deleted=!0}),this.messages=[],this.messages=[{severity:"info",summary:"Confirmed",detail:"You have accepted"}]},reject:()=>{this.messages=[],this.messages=[{severity:"info",summary:"Rejected",detail:"You have rejected"}]}})}clear(e){e.clear()}openWordList(e){this.router.navigate(["/content/word-sentence/list"],{queryParams:{collectionId:e}})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(_._),t.Y36(c.E7),t.Y36(c.xA),t.Y36(p.YP),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(o,i){if(1&o&&t.Gf(D,5),2&o){let s;t.iGM(s=t.CRH())&&(i.dataTable=s.first)}},features:[t._Bn([p.ez,p.YP])],decls:14,vars:15,consts:[[1,"grid"],[1,"col-12"],[3,"value","enableService","closable","valueChange"],[1,"card"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","rowsPerPageOptions","loading","rowHover","paginator","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],[1,"my-2"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-success","mr-2",3,"label","click"],[2,"min-width","12rem"],[1,"flex","justify-content-between","align-items-center"],["type","text","field","name","display","menu","matchMode","contains","placeholder","Search by name"],["type","text","field","author","display","menu","matchMode","contains","placeholder","Search by Author"],["type","text","field","tags","display","menu","matchMode","contains","placeholder","Search by Tags"],[2,"min-width","14rem"],["type","text","field","language","display","menu","matchMode","contains","placeholder","Search by Language"],["pSortableColumn","createdAt",2,"min-width","12rem"],["field","updatedAt"],["type","date","field","createdAt","display","menu","placeholder","mm/dd/yyyy",1,"ml-auto"],["pSortableColumn","updatedAt",2,"min-width","12rem"],["type","date","field","updatedAt","display","menu","placeholder","mm/dd/yyyy",1,"ml-auto"],["type","text","field","collectionId","display","menu","matchMode","contains"],[2,"min-width","13rem"],[3,"pEditableRow","ngClass"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],[2,"text-align","center"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-rounded","p-button-secondary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],["colspan","8"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-messages",2),t.NdJ("valueChange",function(l){return i.messages=l}),t.qZA(),t.TgZ(3,"div",3)(4,"h5"),t._uU(5,"Stories List"),t.qZA(),t.TgZ(6,"p-table",4,5),t.YNc(8,N,4,1,"ng-template",6),t.YNc(9,k,34,0,"ng-template",7),t.YNc(10,P,21,17,"ng-template",8),t.YNc(11,Y,3,0,"ng-template",9),t.YNc(12,R,3,0,"ng-template",10),t.qZA()()()(),t._UZ(13,"p-confirmDialog")),2&o&&(t.xp6(2),t.Q6J("value",i.messages)("enableService",!1)("closable",!0),t.xp6(4),t.Q6J("value",i.storyList)("rows",10)("rowsPerPageOptions",t.DdM(12,H))("loading",i.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",t.DdM(13,Q)),t.xp6(7),t.Akn(t.DdM(14,G)))},dependencies:[u.mk,m.iA,p.jx,m.lQ,m.fz,m.D$,m.xl,y.Hq,f.H,Z.Q,C.V,u.uU],styles:[".disabled-row[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}"]})}return n})(),B=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[g.Bz.forChild([{path:"",component:K}]),g.Bz]})}return n})();var V=a(6804),z=a(4055),$=a(6651),W=a(4104),X=a(7902),tt=a(6022),et=a(7161),ot=a(1312),it=a(2610);let nt=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({providers:[c.xA,c.E7,p.ez],imports:[u.ez,r.u5,m.U$,tt.Xt,y.hJ,X.JH,v.j,V.KZ,f.T,z.q4,x.kW,$.q,W.EV,ot.S,Z.D,et.O,r.UX,B,it.O]})}return n})()}}]);