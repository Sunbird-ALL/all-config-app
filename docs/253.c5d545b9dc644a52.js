"use strict";(self.webpackChunkcontent_service_ui=self.webpackChunkcontent_service_ui||[]).push([[253],{5253:(Q,v,s)=>{s.r(v),s.d(v,{AdaptiveLearningModule:()=>P});var m=s(6814),a=s(95),f=s(3714),u=s(707),_=s(1312),l=s(5118),C=s(9310),c=s(5219),e=s(4946),x=s(7351),g=s(4480),A=s(9445);function y(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"form",1)(2,"div",2)(3,"p-messages",3),e.NdJ("valueChange",function(o){e.CHM(t);const d=e.oxw();return e.KtG(d.messages=o)}),e.qZA(),e.TgZ(4,"div",4)(5,"label",5),e._uU(6),e.TgZ(7,"span",6),e._uU(8,"*"),e.qZA()(),e._UZ(9,"input",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",8),e._uU(12),e.TgZ(13,"span",6),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"input",9),e.NdJ("input",function(o){e.CHM(t);const d=e.oxw();return e.KtG(d.filterNumbersOnly(o))}),e.qZA()()(),e.TgZ(16,"div",10)(17,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addUdiseCode())}),e.qZA(),e._uU(18,"\xa0 "),e.TgZ(19,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.addUdiseForm),e.xp6(2),e.Q6J("value",t.messages)("enableService",!1)("closable",!0),e.xp6(3),e.hij("","School Name"," "),e.xp6(3),e.s9C("placeholder","Enter School Name"),e.xp6(3),e.hij("","Udise Code"," "),e.xp6(3),e.s9C("placeholder","Enter Udise Code"),e.xp6(2),e.s9C("label","Submit"),e.xp6(2),e.s9C("label","Cancel")}}let Z=(()=>{class i{constructor(t,n,o){this.formBuilder=t,this.contentService=n,this.ref=o}ngOnInit(){this.initializeAddForm()}initializeAddForm(){this.addUdiseForm=this.formBuilder.group({school_name:["",a.kI.required],udise_code:["",[a.kI.required,a.kI.minLength(11),a.kI.maxLength(11),a.kI.pattern(/^\d+$/)]]})}addUdiseCode(){this.addUdiseForm.controls.udise_code.value.length<11?this.messages=[{severity:"error",summary:"UDISE Code Must be length of 11"}]:this.addUdiseForm.invalid?this.messages=[{severity:"error",summary:"Add Required Data"}]:this.contentService.addUdiseCode({school_name:this.addUdiseForm.value.school_name,udise_code:this.addUdiseForm.value.udise_code}).subscribe({next:n=>{n.result&&this.ref.close(n.result)},error:n=>{this.messages=[{severity:"error",summary:"error"}]}})}filterNumbersOnly(t){const o=t.target.value.replace(/[^0-9]/g,"");this.addUdiseForm.get("udise_code")?.setValue(o)}cancel(){this.ref.close()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(a.qu),e.Y36(x._),e.Y36(l.E7))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-udise-code"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"card","p-fluid"],[3,"value","enableService","closable","valueChange"],[1,"field"],["for","name"],[1,"required"],["type","text","name","school_name","pInputText","","id","school_name","autofocus","","formControlName","school_name",3,"placeholder"],["for","udise_code"],["type","text","name","udise_code","pInputText","","id","udise_code","autofocus","","formControlName","udise_code","minlength","11","maxlength","11","pattern","^\\d+$",3,"placeholder","input"],[1,"p-col-12","p-md-6","p-lg-4","p-xl-3","p-button-container"],["pButton","","pRipple","","icon","pi pi-check",1,"p-button","p-button-success",3,"label","click"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button","p-button-danger",3,"label","click"]],template:function(n,o){1&n&&e.YNc(0,y,20,10,"div",0),2&n&&e.Q6J("ngIf",!0)},dependencies:[m.O5,u.Hq,a._Y,a.Fj,a.JJ,a.JL,a.wO,a.nD,a.c5,f.o,g.H,a.sg,a.u,A.V],styles:[".required[_ngcontent-%COMP%]{color:red;margin-right:10px;margin-bottom:10px}"]})}return i})();var U=s(3904),p=s(6361);const T=["dt"];function b(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",11),e._UZ(1,"div"),e.TgZ(2,"div",12)(3,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addMoreUdiseCode())}),e.qZA()()()}2&i&&(e.xp6(3),e.s9C("label","Add Udise Code"))}function S(i,r){1&i&&(e.TgZ(0,"tr")(1,"th",14)(2,"div",15),e._uU(3," Serial No. "),e.qZA()(),e.TgZ(4,"th",16)(5,"div",15),e._uU(6," Udise Code "),e._UZ(7,"p-columnFilter",17),e.qZA()(),e.TgZ(8,"th",16)(9,"div",15),e._uU(10," School Name "),e._UZ(11,"p-columnFilter",18),e.qZA()(),e.TgZ(12,"th",19)(13,"div",15),e._uU(14," Actions "),e.qZA()()())}const L=function(i){return{"disabled-row":i}};function F(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr",20)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",21)(8,"button",22),e.NdJ("click",function(){const d=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.deleteUdise(d))}),e.qZA()()()}if(2&i){const t=r.$implicit,n=r.rowIndex,o=e.oxw();e.Q6J("pEditableRow",o.tutorial)("ngClass",e.VKq(5,L,t.deleted)),e.xp6(2),e.hij(" ",n+1," "),e.xp6(2),e.hij(" ",t.udise_code," "),e.xp6(2),e.hij(" ",t.school_name," ")}}function N(i,r){1&i&&(e.TgZ(0,"tr")(1,"td",23),e._uU(2,"No Udise Codes found"),e.qZA()())}function J(i,r){1&i&&(e.TgZ(0,"tr")(1,"td",23),e._uU(2," Loading Udise Codes ... Please wait. "),e.qZA()())}const M=function(){return[10,100,200,300]},Y=function(){return[]},j=function(){return{width:"450px"}};let w=(()=>{class i{ngOnInit(){this.getUdiseCode()}constructor(t,n,o,d){this.contentService=t,this.ref=n,this.dialogService=o,this.confirmationService=d,this.messages=[],this.adaptiveLists=[],this.loading=!1}getUdiseCode(){this.contentService.getUdiseCode().subscribe({next:t=>{t?.result?.length>0&&(this.adaptiveLists=t.result,this.loading=!1)},error:t=>{this.messages=[],this.messages=[{severity:"error",detail:t?.error?.params?.errmsg}]}})}addMoreUdiseCode(){this.ref=this.dialogService.open(Z,{header:"Add Udise Code",data:{mode:"Add"},width:"40%",contentStyle:{overflow:"auto"}}),this.ref.onClose.subscribe(t=>{t&&(this.adaptiveLists.push(t),this.messages=[],this.messages=[{severity:"info",summary:"Created",detail:"Story is Created"}],this.dataTable.reset(),this.dataTable.value=this.adaptiveLists)})}deleteUdise(t){this.confirmationService.confirm({message:"Are you sure that you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.contentService.deleteUdiseCode(t?.udise_code).subscribe(n=>{t.deleted=!0}),this.messages=[],this.messages=[{severity:"info",summary:"Confirmed",detail:"Udise Code deleted"}]},reject:()=>{this.messages=[],this.messages=[{severity:"error",summary:"Rejected",detail:"You have rejected"}]}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(x._),e.Y36(l.E7),e.Y36(l.xA),e.Y36(c.YP))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-adaptive-learning"]],viewQuery:function(n,o){if(1&n&&e.Gf(T,5),2&n){let d;e.iGM(d=e.CRH())&&(o.dataTable=d.first)}},features:[e._Bn([c.ez,c.YP])],decls:14,vars:15,consts:[[1,"grid"],[1,"col-12"],[3,"value","enableService","closable","valueChange"],[1,"card"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","rowsPerPageOptions","loading","rowHover","paginator","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],[1,"my-2"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-success","mr-2",3,"label","click"],["id","",2,"width","100px"],[1,"flex","justify-content-between","align-items-center"],["id","",2,"min-width","12rem"],["type","text","field","udise_code","display","menu","matchMode","contains","placeholder","Search"],["type","text","field","school_name","display","menu","matchMode","contains","placeholder","Search"],["id","",2,"width","110px"],[3,"pEditableRow","ngClass"],[2,"text-align","center","z-index","999"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],["colspan","8"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-messages",2),e.NdJ("valueChange",function(h){return o.messages=h}),e.qZA(),e.TgZ(3,"div",3)(4,"h5"),e._uU(5,"Udise Code"),e.qZA(),e.TgZ(6,"p-table",4,5),e.YNc(8,b,4,1,"ng-template",6),e.YNc(9,S,15,0,"ng-template",7),e.YNc(10,F,9,7,"ng-template",8),e.YNc(11,N,3,0,"ng-template",9),e.YNc(12,J,3,0,"ng-template",10),e.qZA()()()(),e._UZ(13,"p-confirmDialog")),2&n&&(e.xp6(2),e.Q6J("value",o.messages)("enableService",!1)("closable",!0),e.xp6(4),e.Q6J("value",o.adaptiveLists)("rows",10)("rowsPerPageOptions",e.DdM(12,M))("loading",o.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(13,Y)),e.xp6(7),e.Akn(e.DdM(14,j)))},dependencies:[m.mk,U.Q,u.Hq,c.jx,p.iA,p.D$,p.xl,g.H,A.V],styles:[".disabled-row[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}"]})}return i})(),E=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[C.Bz.forChild([{path:"",component:w}]),C.Bz]})}return i})();var H=s(3965),I=s(2610),O=s(7161),B=s(4055),G=s(6651),R=s(6022),z=s(7902),D=s(4104),K=s(6804);let P=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({providers:[l.xA,l.E7,c.ez],imports:[E,m.ez,U.D,a.u5,p.U$,R.Xt,u.hJ,z.JH,f.j,K.KZ,g.T,B.q4,H.kW,G.q,D.EV,_.S,O.O,a.UX,I.O]})}return i})()}}]);